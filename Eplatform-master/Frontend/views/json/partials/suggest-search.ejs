<%
    let jsonObj = {
        query: keySearch,
        url: genUrl.getMapUrl(keySearch),
        companies: data.companies.map(e => {
            return {
                name: e.name,
                url: e.aUrl,
                highlight: e.text,
                logo: e.imgUrl ? e.imgUrl.trim() : ""
            }
        }),
        categories: data.companyCategories.map(e => {
            return {
                id: e._id,
                name: e.name,
                highlight: e.text,
                url: genUrl.getMapUrl(e.name)
            }
        })
    }

    for (let code of ["codeVns", "codeSics", "codeNaics"]) {
        jsonObj[code] = data[code].map(e => {
            return {
                id: e._id,
                name: e.name,
                highlight: e.code + " " + e.text,
                url: genUrl.getMapUrl(e.name)
            }
        })
    }
%>
<%- JSON.stringify(jsonObj) %>